!function(){function e(){var e={restrict:"EA",template:'<div class="panel panel-default"> <div class="panel-heading"> <div class="row"> <div class="col-xs-6"> <div class="form-group"> <input type="text" ng-model="vm.titleFilter" class="form-control" id="exampleInputEmail3" placeholder="Filter by title..."> </div> </div> <div class="col-xs-6"> <div class="checkbox"> <label> <input type="checkbox" ng-click="vm.showSelected()">Selected only </label> </div> </div> </div> </div> <div class="panel-body" ng-if="vm.loading || vm.errors"> <div ng-if="vm.loading" class="text-center"> <i class="fa fa-refresh fa-spin fa-2x"></i> <p>Loading items</p> </div> <div ng-if="vm.errors" class="alert alert-warning text-center"> <i class="fa fa-warning"></i> {{vm.errors}} </div> </div> <ul class="list-group list-striped list-hover panel-filter-list"> <li ng-click="vm.toggleSelected(item.id)" class="list-group-item" ng-class="{\'selected\': vm.isSelected(item.id)}" ng-repeat="item in vm.currentItems | filter:vm.titleFilter | orderBy:\'title\'"> <i ng-if="!vm.isSelected(item.id)" class="fa fa-circle-thin"></i> <i ng-if="vm.isSelected(item.id)" class="fa fa-check"></i> {{item.title}} </li> </ul> <input type="hidden" name="selected_items" value="{{vm.selectedItems.toString()}}"> </div>',scope:{url:"@",titleAs:"@"},controller:t,controllerAs:"vm",bindToController:!0};return e}function t(e){function t(){return i().then(function(){c.loading=!1,c.items.length<1&&(c.errors="There are no items to display.")})}function i(){return e.getItems(c.url).then(function(e){return l(e)})}function l(e){if(c.titleAs){angular.forEach(e,function(e){Object.defineProperty(e,"title",Object.getOwnPropertyDescriptor(e,c.titleAs)),delete e[c.titleAs]})}return c.items=c.currentItems=e,c.items}function s(e){c.isSelected(e)?c.selectedItems.splice(c.isSelected(e)-1,1):c.selectedItems.push(e)}function n(e){return c.selectedItems.indexOf(e)+1}function r(){c.showSelectedStatus?c.currentItems=c.items:(c.currentItems=[],angular.forEach(c.items,function(e){c.isSelected(e.id)&&c.currentItems.push(e)})),c.showSelectedStatus=!c.showSelectedStatus}var c=this;console.log("Url is ",c.url,"titelAs is ",c.titleAs),c.loading=!0,c.errors=null,c.selectedItems=c.items=c.currentItems=[],c.toggleSelected=s,c.showSelected=r,c.showSelectedStatus=!1,c.isSelected=n,t()}function i(e){function t(t){function i(e){return e.data}function l(e){console.log("XHR Failed for getItems."+e.data)}return e.get(t).then(i)["catch"](l)}return{getItems:t}}angular.module("sift",[]).factory("DataService",i).directive("siftPanel",e),t.$inject=["DataService"],i.$inject=["$http"]}();